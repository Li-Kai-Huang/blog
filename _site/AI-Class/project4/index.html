<!DOCTYPE html>
<html lang="zh-TW">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/blog/feed.xml" title="LI KAI 部落格" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>AI 輔助英語教學 | LI KAI 部落格</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="AI 輔助英語教學" />
<meta name="author" content="Li Kai_Huang" />
<meta property="og:locale" content="zh_TW" />
<meta name="description" content="這篇文章會講解我邊緣運算的第四個專案 AI 輔助英語教學" />
<meta property="og:description" content="這篇文章會講解我邊緣運算的第四個專案 AI 輔助英語教學" />
<link rel="canonical" href="http://localhost:4000/blog/AI-Class/project4/" />
<meta property="og:url" content="http://localhost:4000/blog/AI-Class/project4/" />
<meta property="og:site_name" content="LI KAI 部落格" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-06-07T15:40:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="AI 輔助英語教學" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Li Kai_Huang"},"dateModified":"2025-06-07T15:40:00+08:00","datePublished":"2025-06-07T15:40:00+08:00","description":"這篇文章會講解我邊緣運算的第四個專案 AI 輔助英語教學","headline":"AI 輔助英語教學","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/AI-Class/project4/"},"url":"http://localhost:4000/blog/AI-Class/project4/"}</script>
<!-- End Jekyll SEO tag -->

  
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css">
  <link rel="stylesheet" href="/blog/assets/css/open-color.css">
  <link rel="stylesheet" href="/blog/assets/css/hydure.css">

  <script async src="https://use.fontawesome.com/releases/v5.12.0/js/all.js"></script>

  

</head>


  <body>
    <div id="layout" class="pure-g">
      
      
      <div class="sidebar pure-u-1 pure-u-md-1-4" style="background-image: url(https://cdn.jsdelivr.net/gh/zivong/jekyll-theme-hydure@v2.0.0/cover.jpg);">
        <div class="sidebar-shield">
          <header class="header">
  <a class="brand-title" href="/blog/">LI KAI 部落格</a>
  <p class="brand-tagline">寫下我的生活與技術分享</p>

  
    <nav class="nav pure-menu">
      <ul class="pure-menu-list">
      
        <li class="nav-item pure-menu-item">
          <a href="/blog/" class="pure-menu-link ">
            Home
          </a>
        </li>
      
        <li class="nav-item pure-menu-item">
          <a href="/blog/about/" class="pure-menu-link ">
            About
          </a>
        </li>
      
        <li class="nav-item pure-menu-item">
          <a href="/blog/tags/" class="pure-menu-link ">
            Tags
          </a>
        </li>
      
        <li class="nav-item pure-menu-item">
          <a href="/blog/categories/" class="pure-menu-link ">
            Categories
          </a>
        </li>
      
        <li class="nav-item pure-menu-item">
          <a href="https://github.com/Li-Kai-Huang" class="pure-menu-link ">
            GitHub
          </a>
        </li>
      
      </ul>
    </nav>
  

  
    <div class="social pure-menu pure-menu-horizontal">
      <ul class="social-list pure-menu-list">
        
          <li class="social-item pure-menu-item">
            <a class="pure-menu-link pure-button" href="mailto:moray.huang@gmail.com" target="_blank">
              <i class="fas fa-envelope" title="Email"></i>
            </a>
          </li>
        
          <li class="social-item pure-menu-item">
            <a class="pure-menu-link pure-button" href="https://www.facebook.com/moray.huang" target="_blank">
              <i class="fab fa-facebook" title="FaceBook"></i>
            </a>
          </li>
        
          <li class="social-item pure-menu-item">
            <a class="pure-menu-link pure-button" href="https://www.instagram.com/likai._.huang" target="_blank">
              <i class="fab fa-Instagram" title="Instagram"></i>
            </a>
          </li>
        
          <li class="social-item pure-menu-item">
            <a class="pure-menu-link pure-button" href="https://github.com/Li-Kai-Huang" target="_blank">
              <i class="fab fa-github" title="GitHub"></i>
            </a>
          </li>
        
      </ul>
    </div>
  
</header>

        </div>
      </div>
      <div class="content pure-u-1 pure-u-md-3-4">
        <div class="main">
          <article class="post">
  
    <div class="post-meta">
      <ul class="post-categories"><li>
            <span class="post-category">1131邊緣運算課</span></li></ul>
    </div>
  
  <h1 class="post-title">AI 輔助英語教學</h1>
  <div class="post-meta">
    <time datetime="2025-06-07T15:40:00+08:00" itemprop="datePublished">
      07 Jun 2025
    </time></div>
  
  <h1 id="ai-輔助英語教學">AI 輔助英語教學</h1>

<p>本報告旨在介紹一款創新的AI 輔助英語教學系統，旨在為英語學習者提供即時、互動且個性化的學習體驗。該系統的核心功能是結合視覺辨識、語音合成與自然語言處理能力，模擬一位智能家教。當使用者按下按鈕拍攝單字卡影像後，系統會立即將圖像傳送至 Google Gemini Vision 進行單字辨識，隨後透過系統會將辨識出的單字發送至 Google Gemini LLM，由 AI 即時生成一個例句。</p>

<ul>
  <li><a href="#ai-輔助英語教學">AI 輔助英語教學</a>
    <ul>
      <li><a href="#功能">功能</a></li>
      <li><a href="#genai程式碼設計流程">GenAI程式碼設計流程</a></li>
      <li><a href="#程式碼產生提示">程式碼產生提示</a></li>
      <li><a href="#程式碼">程式碼</a>
        <ul>
          <li><a href="#程式重點-提示字-just-say-the-word-in-the-picture--please-make-a-short-sentence-with-word">程式重點 &lt;<strong>提示字:</strong> <em>“Just say the word in the picture?”  \&amp;</em>“please make a short sentence with”+ word*</a></li>
        </ul>
      </li>
      <li><a href="#實作成果">實作成果</a>
        <ul>
          <li><a href="#影片">影片</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="功能">功能</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. 按下按鈕即可拍攝影像
2. 將圖像發送至 Google-Gemini 並回覆訊息
3. 發送訊息到 Google-TTS 並播放 mp3 檔案進行說話 
</code></pre></div></div>

<h2 id="genai程式碼設計流程">GenAI程式碼設計流程</h2>

<pre><code class="language-mermaid">graph TD
    A[開始] --&gt; B(用戶按下按鈕);
    B --&gt; C[捕捉單字卡影像];
    C --&gt; D[影像數據];
    D --&gt; E[發送影像至 Google Gemini Vision];
    E --&gt; F{Gemini Vision 辨識單字};
    F -- 返回單字 Text1 --&gt; G[接收單字 Text1];
    G --&gt; H[發送 Text1 至 Google TTS];
    H --&gt; I{TTS 生成 Text1 MP3 語音};
    I -- 返回 MP3 --&gt; J[接收 Text1 MP3 語音檔];
    J --&gt; K[播放 Text1 MP3 語音];
    
    K --&gt; L[發送 Text1 至 Google Gemini LLM];
    L --&gt; M{Gemini LLM 生成例句 Text2};
    M -- 返回例句 Text2 --&gt; N[接收例句 Text2];
    N --&gt; O[發送 Text2 至 Google TTS];
    O --&gt; P{TTS 生成 Text2 MP3 語音};
    P -- 返回 MP3 --&gt; Q[接收 Text2 MP3 語音檔];
    Q --&gt; R[播放 Text2 MP3 語音];
    R --&gt; S[結束];  
</code></pre>

<p><strong>流程圖說明：</strong></p>

<ul>
  <li><strong>開始 (Start)：</strong> 系統準備就緒。</li>
  <li><strong>用戶按下按鈕 (User Presses Button)：</strong> 用戶觸發影像捕捉。</li>
  <li><strong>捕捉單字卡影像 (Capture Word Card Image)：</strong> 相機模組捕捉單字卡的圖像。</li>
  <li><strong>影像數據 (Image Data)：</strong> 獲取的圖像數據。</li>
  <li><strong>發送影像至 Google Gemini Vision (Send Image to Google Gemini Vision)：</strong> MCU 將圖像上傳到 Google Gemini Vision API。</li>
  <li><strong>Gemini Vision 辨識單字 (Gemini Vision Recognizes Word)：</strong> Google Gemini 在雲端分析圖像並辨識出單字。</li>
  <li><strong>接收單字 Text1 (Receive Word Text1)：</strong> MCU 接收 Gemini 返回的單字文字 (Text1)。</li>
  <li><strong>發送 Text1 至 Google TTS (Send Text1 to Google TTS)：</strong> MCU 將單字 (Text1) 發送到 Google TTS API。</li>
  <li><strong>TTS 生成 Text1 MP3 語音 (TTS Generates Text1 MP3 Audio)：</strong> Google TTS 將單字文字轉換為 MP3 語音。</li>
  <li><strong>接收 Text1 MP3 語音檔 (Receive Text1 MP3 Audio File)：</strong> MCU 接收生成的 MP3 語音檔。</li>
  <li><strong>播放 Text1 MP3 語音 (Play Text1 MP3 Audio)：</strong> MCU 透過揚聲器播放單字語音。</li>
  <li><strong>發送 Text1 至 Google Gemini LLM (Send Text1 to Google Gemini LLM)：</strong> MCU 將單字 (Text1) 發送到 Google Gemini LLM API 以生成例句。</li>
  <li><strong>Gemini LLM 生成例句 Text2 (Gemini LLM Generates Example Sentence Text2)：</strong> Google Gemini LLM 根據單字生成一個例句。</li>
  <li><strong>接收例句 Text2 (Receive Example Sentence Text2)：</strong> MCU 接收 Gemini LLM 返回的例句文字 (Text2)。</li>
  <li><strong>發送 Text2 至 Google TTS (Send Text2 to Google TTS)：</strong> MCU 將例句 (Text2) 發送到 Google TTS API。</li>
  <li><strong>TTS 生成 Text2 MP3 語音 (TTS Generates Text2 MP3 Audio)：</strong> Google TTS 將例句文字轉換為 MP3 語音。</li>
  <li><strong>接收 Text2 MP3 語音檔 (Receive Text2 MP3 Audio File)：</strong> MCU 接收生成的 MP3 語音檔。</li>
  <li><strong>播放 Text2 MP3 語音 (Play Text2 MP3 Audio)：</strong> MCU 透過揚聲器播放例句語音。</li>
  <li><strong>結束 (End)：</strong> 一次英語教學輔助流程完成。</li>
</ul>

<h2 id="程式碼產生提示">程式碼產生提示</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>我給你三份範例代碼請幫我結合 並符合以下要求

  1. 按下按鈕即可拍攝影像
  2. 將圖像傳送到 Gemini-Vision 來讀取單字卡
  3. 將 Text1 發送到 Google-TTS 並播放 mp3 檔案進行朗讀 
  4. 將 Text1 送到 Gemini-LLM 來造句
  5. 將 Text2 發送到 Google-TTS 並播放 mp3 檔案進行說話  範例:   [GenAIVision.ino](https://github.com/rkuo2000/EdgeAI-AMB82mini/blob/main/ArduinoAMB82-mini/GenAIVision/GenAIVision.ino)   [文字轉語音.ino](https://github.com/rkuo2000/EdgeAI-AMB82mini/blob/main/Arduino/AMB82-mini/TextToSpeech/TextToSpeech.ino)   [ILI9341_TFTLCD_文本.ino](https://github.com/rkuo2000/EdgeAI-AMB82mini/blob/main/Arduino/AMB82-mini/ILI9341_TFTLCD_Text/ILI9341_TFTLCD_Text.ino)
</code></pre></div></div>

<h2 id="程式碼">程式碼</h2>

<h3 id="程式重點-提示字-just-say-the-word-in-the-picture--please-make-a-short-sentence-with-word">程式重點 &lt;<strong>提示字:</strong> <em>“Just say the word in the picture?”  &amp;</em>“please make a short sentence with”+ word*</h3>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">String</span> <span class="n">openAI_key</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>                                         <span class="c1">// paste your generated openAI API key here</span>
<span class="n">String</span> <span class="n">Gemini_key</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>  <span class="c1">// paste your generated Gemini API key here</span>
<span class="n">String</span> <span class="n">Llama_key</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>                                          <span class="c1">// paste your generated Llama API key here</span>
<span class="kt">char</span> <span class="n">wifi_ssid</span><span class="p">[]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span><span class="c1">// your network SSID (name)</span>
<span class="kt">char</span> <span class="n">wifi_pass</span><span class="p">[]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span><span class="c1">// your network password</span>

<span class="cp">#include</span> <span class="cpf">&lt;WiFi.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;WiFiUdp.h&gt;</span><span class="cp">
#include</span> <span class="cpf">"GenAI.h"</span><span class="cp">
#include</span> <span class="cpf">"VideoStream.h"</span><span class="cp">
#include</span> <span class="cpf">"SPI.h"</span><span class="cp">
#include</span> <span class="cpf">"AmebaILI9341.h"</span><span class="cp">
#include</span> <span class="cpf">"TJpg_Decoder.h"</span><span class="c1">  // Include the jpeg decoder library</span><span class="cp">
#include</span> <span class="cpf">"AmebaFatFS.h"</span><span class="cp">
</span>
<span class="n">WiFiSSLClient</span> <span class="n">client</span><span class="p">;</span>
<span class="n">GenAI</span> <span class="n">llm</span><span class="p">;</span>
<span class="n">GenAI</span> <span class="n">tts</span><span class="p">;</span>

<span class="n">AmebaFatFS</span> <span class="n">fs</span><span class="p">;</span>
<span class="n">String</span> <span class="n">mp3Filename</span> <span class="o">=</span> <span class="s">"test_play_google_tts.mp3"</span><span class="p">;</span>

<span class="n">VideoSetting</span> <span class="nf">config</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="mi">768</span><span class="p">,</span> <span class="n">CAM_FPS</span><span class="p">,</span> <span class="n">VIDEO_JPEG</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="cp">#define CHANNEL 0
</span>
<span class="kt">uint32_t</span> <span class="n">img_addr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">img_len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">buttonPin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// the number of the pushbutton pin</span>

<span class="cp">#define TFT_RESET 5
#define TFT_DC 4
#define TFT_CS SPI_SS
</span>
<span class="n">AmebaILI9341</span> <span class="n">tft</span> <span class="o">=</span> <span class="n">AmebaILI9341</span><span class="p">(</span><span class="n">TFT_CS</span><span class="p">,</span> <span class="n">TFT_DC</span><span class="p">,</span> <span class="n">TFT_RESET</span><span class="p">);</span>

<span class="cp">#define ILI9341_SPI_FREQUENCY 20000000
</span>
<span class="n">bool</span> <span class="nf">tft_output</span><span class="p">(</span><span class="kt">int16_t</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int16_t</span> <span class="n">y</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">w</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">h</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="o">*</span><span class="n">bitmap</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">tft</span><span class="p">.</span><span class="n">drawBitmap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">bitmap</span><span class="p">);</span>

  <span class="c1">// Return 1 to decode next block</span>
  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">initWiFi</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">wifi_ssid</span><span class="p">,</span> <span class="n">wifi_pass</span><span class="p">);</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Connecting to "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">wifi_ssid</span><span class="p">);</span>

    <span class="kt">uint32_t</span> <span class="n">StartTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">((</span><span class="n">StartTime</span> <span class="o">+</span> <span class="mi">5000</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">millis</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">==</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"STAIP address: "</span><span class="p">);</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">localIP</span><span class="p">());</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">init_tft</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">tft</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">tft</span><span class="p">.</span><span class="n">setRotation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="n">tft</span><span class="p">.</span><span class="n">clr</span><span class="p">();</span>
  <span class="n">tft</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

  <span class="n">tft</span><span class="p">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">ILI9341_GREEN</span><span class="p">);</span>
  <span class="n">tft</span><span class="p">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>

  <span class="n">SPI</span><span class="p">.</span><span class="n">setDefaultFrequency</span><span class="p">(</span><span class="n">ILI9341_SPI_FREQUENCY</span><span class="p">);</span>
  <span class="n">initWiFi</span><span class="p">();</span>

  <span class="n">config</span><span class="p">.</span><span class="n">setRotation</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">Camera</span><span class="p">.</span><span class="n">configVideoChannel</span><span class="p">(</span><span class="n">CHANNEL</span><span class="p">,</span> <span class="n">config</span><span class="p">);</span>
  <span class="n">Camera</span><span class="p">.</span><span class="n">videoInit</span><span class="p">();</span>
  <span class="n">Camera</span><span class="p">.</span><span class="n">channelBegin</span><span class="p">(</span><span class="n">CHANNEL</span><span class="p">);</span>
  <span class="n">Camera</span><span class="p">.</span><span class="n">printInfo</span><span class="p">();</span>

  <span class="n">pinMode</span><span class="p">(</span><span class="n">buttonPin</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_B</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>

  <span class="n">init_tft</span><span class="p">();</span>
  <span class="n">tft</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"GenAIVision_TTS_ReadWordCard"</span><span class="p">);</span>

  <span class="n">TJpgDec</span><span class="p">.</span><span class="n">setJpgScale</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>  <span class="c1">// The jpeg image can be scaled by a factor of 1, 2, 4, or 8</span>
  <span class="n">TJpgDec</span><span class="p">.</span><span class="n">setCallback</span><span class="p">(</span><span class="n">tft_output</span><span class="p">);</span>

  <span class="n">tft</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Press Button"</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">blink_blue</span><span class="p">(</span><span class="kt">int</span> <span class="n">count</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_B</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_B</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">((</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">buttonPin</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Image captured!"</span><span class="p">);</span>
    <span class="n">blink_blue</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>  <span class="c1">// blink</span>
                    <span class="c1">// Camera take image</span>

    <span class="n">Camera</span><span class="p">.</span><span class="n">getImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">img_addr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">img_len</span><span class="p">);</span>

    <span class="c1">// JPEG decode image &amp; display</span>
    <span class="n">TJpgDec</span><span class="p">.</span><span class="n">getJpgSize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span><span class="n">img_addr</span><span class="p">,</span> <span class="n">img_len</span><span class="p">);</span>
    <span class="n">TJpgDec</span><span class="p">.</span><span class="n">drawJpg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span><span class="n">img_addr</span><span class="p">,</span> <span class="n">img_len</span><span class="p">);</span>

    <span class="c1">// LLM Vision</span>
    <span class="n">String</span> <span class="n">prompt_msg_img</span> <span class="o">=</span> <span class="s">"Just say the word in the picture?"</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">llm</span><span class="p">.</span><span class="n">geminivision</span><span class="p">(</span><span class="n">Gemini_key</span><span class="p">,</span> <span class="s">"gemini-2.0-flash"</span><span class="p">,</span> <span class="n">prompt_msg_img</span><span class="p">,</span> <span class="n">img_addr</span><span class="p">,</span> <span class="n">img_len</span><span class="p">,</span> <span class="n">client</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">tft</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>

    <span class="c1">// Text-To-Speech &amp; play mp3 file</span>
    <span class="n">tts</span><span class="p">.</span><span class="n">googletts</span><span class="p">(</span><span class="n">mp3Filename</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="s">"en-US"</span><span class="p">);</span>
    <span class="c1">//tts.googletts(mp3Filename, text, "zh-TW");</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">sdPlayMP3</span><span class="p">(</span><span class="n">mp3Filename</span><span class="p">);</span>

    <span class="c1">// LLM Text</span>
    <span class="n">String</span> <span class="n">prompt_msg</span> <span class="o">=</span> <span class="s">"please make a short sentence with "</span><span class="o">+</span><span class="n">text</span><span class="p">;</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">prompt_msg</span><span class="p">);</span>
    <span class="n">String</span> <span class="n">txt</span> <span class="o">=</span> <span class="n">llm</span><span class="p">.</span><span class="n">geminitext</span><span class="p">(</span><span class="n">Gemini_key</span><span class="p">,</span> <span class="s">"gemini-2.0-flash"</span><span class="p">,</span> <span class="n">prompt_msg</span><span class="p">,</span> <span class="n">client</span><span class="p">);</span>    
    <span class="n">tft</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">txt</span><span class="p">);</span>

    <span class="c1">// Text-To-Speech &amp; play mp3 file</span>
    <span class="n">tts</span><span class="p">.</span><span class="n">googletts</span><span class="p">(</span><span class="n">mp3Filename</span><span class="p">,</span> <span class="n">txt</span><span class="p">,</span> <span class="s">"en-US"</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">sdPlayMP3</span><span class="p">(</span><span class="n">mp3Filename</span><span class="p">);</span>

    <span class="n">tft</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Press Button"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">sdPlayMP3</span><span class="p">(</span><span class="n">String</span> <span class="n">filename</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">fs</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">String</span> <span class="n">filepath</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">fs</span><span class="p">.</span><span class="n">getRootPath</span><span class="p">())</span> <span class="o">+</span> <span class="n">filename</span><span class="p">;</span>
  <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">fs</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">MP3</span><span class="p">);</span>
  <span class="n">file</span><span class="p">.</span><span class="n">setMp3DigitalVol</span><span class="p">(</span><span class="mi">128</span><span class="p">);</span>
  <span class="n">file</span><span class="p">.</span><span class="n">playMp3</span><span class="p">();</span>
  <span class="n">file</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
  <span class="n">fs</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="實作成果">實作成果</h2>

<h3 id="影片">影片</h3>

<p>Damo影片</p>

<p><a href="https://www.youtube.com/watch?v=3WUXcYA3hXg"><img src="https://img.youtube.com/vi/3WUXcYA3hXg/0.jpg" alt="IMAGE ALT TEXT HERE" /></a><br />
點擊圖片播放</p>


  
    <div class="post-meta">
      <i class="post-tags-icon fas fa-tag"></i>
      <ul class="post-tags"><li>
            <span class="post-tag">入門</span></li><li>
            <span class="post-tag">學習</span></li><li>
            <span class="post-tag">blog</span></li></ul>
    </div>
  

  
</article>

        </div>
        <footer class="footer pure-g">
  <div class="pure-u-1 pure-u-md-1-2">
    <small>
      &copy;&nbsp;<time datetime="2025-06-14T23:16:14+08:00">2025</time>&nbsp;<a href="" target="_blank">Li Kai_Huang</a>. All right reserved.
    </small>
  </div>

  <div class="pure-u-1 pure-u-md-1-2">
    <small>
      Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a> & <a href="https://github.com/zivong/jekyll-theme-hydure" target="_blank">Hydure</a>
    </small>
  </div>
</footer>

      </div>
    </div>

    

    
  </body>
</html>
